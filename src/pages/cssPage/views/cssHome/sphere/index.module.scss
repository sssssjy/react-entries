@use "sass:math";
@use "sass:string";

$str: "QWERTYUIOPASDFGHJKLZXCVBNMabcdefghigklmnopqrstuvwxyz123456789";
$length: str-length($str);
$size: 25;
$count: 41;

.sphere {
    padding-bottom: 400px;
    :global {
        @function randomLinear($count) {
            $value: "";
            @for $i from 0 through ($count - 1) {
                $value: $value + randomColor() + string.unquote(" 0 #{$i * 25}px,");
            }
            @return linear-gradient(string.unquote(#{$value}) randomColor() 0 100%);
        }

        @function randomColor() {
            @return rgb(math.random(255), math.random(255), math.random(255));
        }

        @function randomChar() {
            $r: random($length);
            @return str-slice($str, $r, $r);
        }

        @function randomChars($number) {
            $value: "";
            @if $number > 0 {
                @for $i from 1 through $number {
                    $value: $value + randomChar();
                }
            }

            @return $value;
        }

        .container {
            perspective: 1000px;
            transform: translateZ(-3000px);
            height: 400px;
            .box-3d {
                position: relative;
                transform-style: preserve-3d;
                // & :local{
                //     transform-origin: center center;
                //     animation: box-3d-ani 4s linear infinite;
                // }
                .item {
                    position: absolute;
                    width: 200px;
                    height: 200px;
                    background-color: rgba($color: #abcdef, $alpha: 0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border: 1px solid #f3f3f3;
                    &:nth-of-type(1) {
                        transform: translateZ(100px);
                    }

                    &:nth-of-type(2) {
                        transform: rotateY(90deg) translateZ(100px);
                    }

                    &:nth-of-type(3) {
                        transform: rotateY(180deg) translateZ(100px);
                    }

                    &:nth-of-type(4) {
                        transform: rotateY(270deg) translateZ(100px);
                    }

                    &:nth-of-type(5) {
                        transform: rotateX(90deg) translateZ(100px);
                    }
                }
            }
        }

        .clip-text {
            text-align: center;

            word-break: break-all;
            position: relative;
            &::before {
                content: randomChars(14);
                position: absolute;
                font-family: monospace;
                background: randomLinear(14);
                background-clip: text;
                color: transparent;
                width: 25px;
                line-height: 25px;
                font-size: 25px;

                --content1: "#{randomChars(14)}";
                --content2: "#{randomChars(14)}";
                --content3: "#{randomChars(14)}";
                --content4: "#{randomChars(14)}";

                & :local {
                    animation:
                        contentChange 1s infinite,
                        colorChange 1s steps(12) infinite;
                }
            }
        }

        .single-div {
            width: 800px;
            height: 800px;
            position: relative;
            display: flex;
            word-break: break-all;
            & :local {
                animation: colorChange 1s steps(12) infinite;
            }

            div {
                position: relative;
                width: #{$size}px;
                height: 800px;
                flex-shrink: 0;
                &::before {
                    position: absolute;
                    inset: 0;
                    text-align: center;
                    font-size: #{$size}px;
                    width: #{$size}px;
                    text-align: center;
                    line-height: #{$size}px;
                    color: transparent;
                }
            }

            @for $i from 1 to $count {
                div:nth-of-type(#{$i}) {
                    &::before {
                        content: randomChars(32);
                        --content1: "#{randomChars(32)}";
                        --content2: "#{randomChars(32)}";
                        --content3: "#{randomChars(32)}";
                        --content4: "#{randomChars(32)}";
                        & :local {
                            font-family: monospace;
                            animation: contentChange 1s infinite;
                        }
                        background: randomLinear(32);
                        background-clip: text;
                    }
                }
            }
        }

        .perspective {
            perspective: 300px;
            .con {
                transform-style: preserve-3d;
                position: relative;
                width: 800px;
                height: 800px;
                transform: translateY(-350px) rotateX(33deg);
                .panel {
                    position: absolute;
                    width: 800px;
                    height: 800px;
                    background-color: #000;
                    &:nth-of-type(1) {
                        transform: translateZ(400px);
                    }
                    &:nth-of-type(2) {
                        transform: rotateY(90deg) translateZ(400px);
                    }
                    &:nth-of-type(3) {
                        transform: rotateY(180deg) translateZ(400px);
                    }
                    &:nth-of-type(4) {
                        transform: rotateY(270deg) translateZ(400px);
                    }
                    &:nth-of-type(5) {
                        transform: rotateX(90deg) translateZ(400px);
                        & :local{
                            animation: topMove 6s ease-out infinite;
                        }
                    }

                    display: flex;
                    word-break: break-all;
                    & :local {
                        animation: colorChange 1s steps(12) infinite;
                    }

                    div {
                        position: relative;
                        width: #{$size}px;
                        height: 800px;
                        flex-shrink: 0;
                        &::before {
                            position: absolute;
                            inset: 0;
                            text-align: center;
                            font-size: #{$size}px;
                            width: #{$size}px;
                            text-align: center;
                            line-height: #{$size}px;
                            color: transparent;
                        }
                    }

                    @for $i from 1 to $count {
                        div:nth-of-type(#{$i}) {
                            &::before {
                                content: randomChars(32);
                                --content1: "#{randomChars(32)}";
                                --content2: "#{randomChars(32)}";
                                --content3: "#{randomChars(32)}";
                                --content4: "#{randomChars(32)}";
                                & :local {
                                    font-family: monospace;
                                    animation: contentChange 1s infinite;
                                }
                                background: randomLinear(32);
                                background-clip: text;
                            }
                        }
                    }
                }
            }
        }
    }
}

@keyframes box-3d-ani {
    to {
        transform: rotateY(-360deg);
    }
}

@keyframes contentChange {
    20% {
        content: var(--content1);
    }
    40% {
        content: var(--content2);
    }
    60% {
        content: var(--content3);
    }
    80% {
        content: var(--content4);
    }
}

@keyframes colorChange {
    to {
        filter: hue-rotate(360deg);
    }
}

@keyframes topMove {
    from{
        transform: rotateX(90deg) translateZ(400px);
    }
    to{
        transform: rotateX(90deg) translateZ(100px);
    }
}

// html, body{
//     background-color: #000;
// }
